<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>学生管理系统</title>
    <link rel="stylesheet" href="/css/bootstrap.css">
</head>
<body>
<nav class="navbar navbar-default">
    <div class="container">
        <!-- Brand and toggle get grouped for better mobile display -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1" aria-expanded="false">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="/mindex">学生管理系统</a>
        </div>
        <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
            <ul class="nav navbar-nav navbar-right">
                <li><a href="/addstudent">添加</a></li>
            </ul>
        </div>
    </div>
</nav>

<div class="tableShow">
    <div class="container">
        <form action="/doaddstudent" method="POST" class="form-horizontal" id="addForm">
            <div class="form-group">
                <label for="sid" class="col-sm-2 control-label">学号:</label>
                <div class="col-sm-3">
                    <input type="text" class="form-control sid" id="sid" name="sid" placeholder="请输入学号...">
                </div>
            </div>
            <div class="form-group" style="margin-top: 30px">
                <label for="name" class="col-sm-2 control-label">姓名:</label>
                <div class="col-sm-8">
                    <input type="text" class="form-control name" id="name" name="name" placeholder="请输入姓名..." >
                </div>
            </div>
            <div class="form-group" style="margin-top: 30px">
                <div class="col-sm-8 col-md-offset-2">
                    <label style="margin-right: 30px"><input type="radio" value="男生" name="sex"/> 男生</label>
                    <label><input type="radio" value="女生" name="sex"/> 女生</label>
                </div>
            </div>
            <div class="form-group" style="margin-top: 30px">
                <label for="age" class="col-sm-2 control-label">年龄:</label>
                <div class="col-sm-1">
                    <input type="number" class="form-control age" id="age" name="age">
                </div>
            </div>
            <div class="form-group" style="margin-top: 30px">
                <label for="phone" class="col-sm-2 control-label">手机号:</label>
                <div class="col-sm-8">
                    <input type="text" class="form-control phone" id="phone" name="phone" placeholder="请输入手机号...">
                </div>
            </div>
            <div class="form-group" style="margin-top: 30px">
                <label for="email" class="col-sm-2 control-label">邮箱:</label>
                <div class="col-sm-8">
                    <input type="text" class="form-control email" id="email" name="email" placeholder="请输入邮箱...">
                </div>
            </div>
            <div class="form-group" style="margin-top: 30px">
                <div class="col-sm-8 col-sm-offset-2">
                    <textarea class="form-control" rows="3" name="other" placeholder="请输入其他信息..."></textarea>
                </div>
            </div>
            <button style="margin-bottom: 30px" type="submit" id="tianjiaxueshengxinxi"  class="btn btn-danger col-md-offset-2 col-md-8"> 添 加 </button>
        </form>
    </div>
</div>


<script src="js/jquery-3.2.1.min.js"></script>
<script src="js/bootstrap.js"></script>
<script src="js/jquery.validate.js"></script>
<script type=text/javascript>
//    $(function () {
//        //对表单进行验证
//        $('#addForm').validate({
//            debug:true,
//            //验证的规则
//            rules:{
//                sid:{
//                    required:true,
//                    minlength:10,
//                    maxlength:10
//                },
//                name:{
//                    required:true,
//                    minlength:3
//                },
//                age:{
//                    required:true
//                },
//                phone:{
//                    required:true,
//                    isPhone:true
//                },
//                email:{
//                    required:true,
//                    email:true
//                }
//            },
//            //错误的提示信息
//            messages:{
//                sid:{
//                    required:'学号不能为空',
//                    minlength:'学号不能少于10位',
//                    maxlength:"学号必须是10位"
//                },
//                name:{
//                    required:'姓名不能为空',
//                    minlength:'姓名不能少于3位'
//                },
//                age:{
//                    required:'年龄不能为空'
//                },
//                phone:{
//                    required:'手机号不能为空',
//                    isPhone:'手机号格式错误'
//                },
//                email:{
//                    required:'邮箱不能为空',
//                    email:'邮箱格式错误'
//                }
//            },
//        })
//    })

//            $("#tianjiaxueshengxinxi").click(function () {
//                $.post("./doaddstudent",{
//                    "sid":$("#sid").val(),
//                    "name":$("#name").val(),
//                    "age":$("#age").val(),
//                    "sex":$("#sex").val(),
//                    "phone":$("#phone").val(),
//                    "other":$("#other").val(),
//                    "email":$("#email").val()
//                },function(result){
//                    if (result=="-1"){
//                        alert("用户名被注册");
//                    } else if(result == '-3'){
//                        alert("数据库出错");
//                    } else if(result == '1'){
//                        alert("添加成功");
//                        window.location.href = '/mindex';
////                        return;
//                    }
//                })
//            })

        $("#tianjiaxueshengxinxi").click(function(){
            $.ajax({
                type: "POST",
                url:"/doaddstudent",
                data:$('#addForm').serialize(),
                async: true,
                error: function(request) {
                    alert("Connection error");
                },
                success: function(result) {
                    //这儿ajax传不过参数。
                    if(result = '1'){
//                        alert("chenggong");
                        window.location = 'http://127.0.0.1:3000/mindex';
                    }
                }
                })
            })

</script>
</body>
</html>